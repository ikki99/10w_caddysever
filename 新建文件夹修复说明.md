# 新建文件夹功能修复说明

## 问题描述
新建文件夹时，如果在根目录（如 `d:\www`），会在程序执行目录（如 `d:\10w_caddysever`）下创建文件夹，而不是在文件管理器当前目录创建。

## 问题原因
当 `currentPath` 为空字符串时，`filepath.Join("", "文件夹名")` 返回相对路径，导致在程序当前工作目录创建文件夹。

## 修复方案
在 `CreateFolderHandler` 函数中添加检查：
- 如果 `path` 参数为空，自动使用 `www_root` 设置的根目录
- 确保始终使用绝对路径创建文件夹

## 修改文件
- `internal/api/system.go` - `CreateFolderHandler` 函数

## 测试步骤
1. 打开文件管理器，停留在 `d:\www` 根目录
2. 点击"新建文件夹"，输入 `test001`
3. 验证文件夹在 `d:\www\test001` 创建，而不是在程序目录
4. 进入子目录（如 `d:\www\website`），创建文件夹 `test002`
5. 验证文件夹在 `d:\www\website\test002` 创建

## 修复日期
2025-01-XX
